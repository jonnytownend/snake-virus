:root {
  --bg: #0f141a;
  --panel: #151d26;
  --panel-2: #1c2732;
  --ink: #d6e2f0;
  --muted: #88a4bf;
  --accent: #7ef2c5;
  --danger: #ff7a8a;
  --line: #243545;
  --target: #ffd166;
  --virus: #8bff66;
  --virus-head: #e6ff96;
  --tk-keyword: #6ed0ff;
  --tk-string: #f7a86e;
  --tk-number: #79e6a4;
  --tk-comment: #637f99;
  --tk-function: #d2b7ff;
  --tk-punct: #9db7d1;
}

* {
  box-sizing: border-box;
}

body {
  margin: 0;
  min-height: 100vh;
  color: var(--ink);
  background:
    radial-gradient(circle at 20% -10%, #25435f 0%, transparent 30%),
    radial-gradient(circle at 120% 0%, #2e2244 0%, transparent 35%),
    linear-gradient(180deg, #0b1015 0%, var(--bg) 65%);
  font-family: "JetBrains Mono", "IBM Plex Mono", "Fira Code", monospace;
  display: grid;
  place-items: center;
  padding: 18px;
}

.app {
  width: min(1140px, 100%);
  border: 1px solid #27394b;
  border-radius: 14px;
  overflow: hidden;
  background: linear-gradient(180deg, #101821 0%, #0f151d 100%);
  box-shadow: 0 24px 60px rgba(0, 0, 0, 0.45);
}

.intro-overlay {
  position: fixed;
  inset: 0;
  display: grid;
  place-items: center;
  padding: 20px;
  background: rgba(4, 8, 12, 0.72);
  backdrop-filter: blur(4px);
  z-index: 20;
}

.intro-overlay.hidden {
  display: none;
}

.intro-modal {
  width: min(680px, 100%);
  border: 1px solid #35556e;
  border-radius: 16px;
  background:
    radial-gradient(circle at 90% 10%, rgba(80, 183, 255, 0.16), transparent 42%),
    linear-gradient(180deg, #0f1b26 0%, #0d151d 100%);
  box-shadow: 0 26px 70px rgba(0, 0, 0, 0.6);
  padding: 24px;
}

.intro-tag {
  margin: 0 0 8px;
  color: #86b2d7;
  font-size: 12px;
  letter-spacing: 1.2px;
}

.intro-modal h2 {
  margin: 0 0 12px;
  font-size: 30px;
  color: #dff3ff;
}

.intro-modal p {
  margin: 0 0 10px;
  color: #b7cde2;
  line-height: 1.5;
}

.intro-modal ul {
  margin: 14px 0 18px;
  padding-left: 20px;
  color: #d1e8ff;
  line-height: 1.55;
}

.intro-start {
  border: 1px solid #4f7594;
  background: linear-gradient(180deg, #173349 0%, #122739 100%);
  color: #dff3ff;
  border-radius: 10px;
  padding: 10px 14px;
  font-family: inherit;
  font-size: 14px;
  cursor: pointer;
}

.intro-start:hover {
  border-color: #77abcf;
}

.titlebar {
  display: flex;
  align-items: center;
  gap: 10px;
  background: #0d1319;
  border-bottom: 1px solid var(--line);
  padding: 10px 14px;
  font-size: 13px;
}

.lights {
  display: flex;
  gap: 7px;
}

.light {
  width: 10px;
  height: 10px;
  border-radius: 50%;
}

.light.r {
  background: #ff5f57;
}

.light.y {
  background: #ffbd2e;
}

.light.g {
  background: #27c93f;
}

.workspace {
  display: grid;
  grid-template-columns: 230px 1fr;
  min-height: min(760px, calc(100vh - 70px));
}

.hud {
  background: var(--panel);
  border-right: 1px solid var(--line);
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 14px;
}

.hud h1 {
  margin: 0;
  font-size: 16px;
  line-height: 1.2;
  letter-spacing: 0.4px;
}

.status {
  display: grid;
  gap: 8px;
}

.item {
  background: var(--panel-2);
  border: 1px solid #2a3d4f;
  border-radius: 10px;
  padding: 10px;
}

.k {
  color: var(--muted);
  font-size: 12px;
}

.v {
  font-size: 18px;
  color: var(--accent);
  margin-top: 2px;
}

#targetChar,
#avoidChars {
  font-size: 15px;
  letter-spacing: 0.3px;
  word-spacing: 3px;
}

.help {
  font-size: 12px;
  line-height: 1.45;
  color: #aec3d8;
}

.cta {
  margin-top: auto;
  border: 1px dashed #355068;
  border-radius: 10px;
  background: #14202a;
  color: #b5d0e7;
  font-size: 12px;
  padding: 10px;
}

.editor-wrap {
  position: relative;
  background: #0e151d;
  overflow: hidden;
}

.editor-head {
  display: flex;
  gap: 14px;
  align-items: center;
  font-size: 12px;
  color: #87a6c3;
  border-bottom: 1px solid var(--line);
  padding: 9px 12px;
  background: #121b25;
}

#editor {
  margin: 0;
  padding: 14px 12px 20px 12px;
  font-size: 16px;
  line-height: 1.2;
  white-space: pre;
  overflow: auto;
  height: calc(100% - 37px);
}

.line {
  display: block;
}

.ln {
  display: inline-block;
  width: 42px;
  color: #4f6c87;
  user-select: none;
}

.ch {
  color: #cad8e8;
}

.cell {
  display: inline-block;
}

.corrupted,
.hazard {
  color: #ff91a0 !important;
  background: rgba(255, 122, 138, 0.18);
  box-shadow:
    inset 0 0 0 1px rgba(255, 145, 160, 0.6),
    0 0 10px rgba(255, 122, 138, 0.25);
  text-shadow: 0 0 8px rgba(255, 122, 138, 0.6);
  border-radius: 2px;
}

.target {
  color: var(--target) !important;
  background: rgba(255, 209, 102, 0.28);
  box-shadow:
    inset 0 0 0 1px rgba(255, 222, 133, 0.85),
    0 0 12px rgba(255, 209, 102, 0.4);
  text-shadow:
    0 0 10px rgba(255, 209, 102, 0.65),
    0 0 2px rgba(255, 247, 211, 0.95);
  font-weight: 700;
  border-radius: 2px;
  animation: target-pulse 1.2s ease-in-out infinite;
}

.tk-keyword {
  color: var(--tk-keyword);
}

.tk-string {
  color: var(--tk-string);
}

.tk-number {
  color: var(--tk-number);
}

.tk-comment {
  color: var(--tk-comment);
}

.tk-function {
  color: var(--tk-function);
}

.tk-punct {
  color: var(--tk-punct);
}

.virus {
  background: rgba(89, 255, 83, 0.2);
  color: var(--virus);
}

.head {
  background: rgba(205, 255, 97, 0.28);
  color: var(--virus-head);
}

.dead {
  color: var(--danger);
}

.glitch #editor {
  animation: jitter 140ms steps(3);
}

@keyframes jitter {
  0% {
    transform: translate(0, 0);
    filter: hue-rotate(0deg);
  }

  25% {
    transform: translate(-3px, 1px);
    filter: hue-rotate(40deg);
  }

  50% {
    transform: translate(3px, -1px);
    filter: hue-rotate(-40deg);
  }

  100% {
    transform: translate(0, 0);
    filter: hue-rotate(0deg);
  }
}

@keyframes target-pulse {
  0% {
    filter: brightness(1);
  }

  50% {
    filter: brightness(1.25);
  }

  100% {
    filter: brightness(1);
  }
}

@media (max-width: 900px) {
  .workspace {
    grid-template-columns: 1fr;
    grid-template-rows: auto 1fr;
  }

  .hud {
    border-right: 0;
    border-bottom: 1px solid var(--line);
  }

  .intro-modal {
    padding: 18px;
  }

  .intro-modal h2 {
    font-size: 24px;
  }
}
